{"ast":null,"code":"import _asyncToGenerator from \"D:/clase/Master/Internet/angular/polaflix-mario/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../usuario-service.service\";\nimport * as i2 from \"@angular/common\";\n\nfunction VisualizarSerieComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\");\n  }\n}\n\nfunction VisualizarSerieComponent_ng_template_13_tr_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵelementStart(4, \"input\", 10);\n    i0.ɵɵlistener(\"click\", function VisualizarSerieComponent_ng_template_13_tr_3_Template_input_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const capitulo_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return ctx_r7.verCapitulo(capitulo_r6.numero);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6, \" Pendiente \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const capitulo_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(capitulo_r6.titulo);\n  }\n}\n\nfunction VisualizarSerieComponent_ng_template_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"table\");\n    i0.ɵɵelementStart(2, \"tbody\");\n    i0.ɵɵtemplate(3, VisualizarSerieComponent_ng_template_13_tr_3_Template, 7, 1, \"tr\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.serie.temporadas[ctx_r2.temporada].capitulos);\n  }\n}\n\nfunction VisualizarSerieComponent_ng_template_15_tr_2_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\");\n  }\n}\n\nfunction VisualizarSerieComponent_ng_template_15_tr_2_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1, \" Visto \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction VisualizarSerieComponent_ng_template_15_tr_2_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1, \" Pendiente \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction VisualizarSerieComponent_ng_template_15_tr_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵelementStart(4, \"input\", 10);\n    i0.ɵɵlistener(\"click\", function VisualizarSerieComponent_ng_template_15_tr_2_Template_input_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r17);\n      const capitulo_r10 = restoredCtx.$implicit;\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return ctx_r16.verCapitulo(capitulo_r10.numero);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, VisualizarSerieComponent_ng_template_15_tr_2_div_5_Template, 1, 0, \"div\", 6);\n    i0.ɵɵtemplate(6, VisualizarSerieComponent_ng_template_15_tr_2_ng_template_6_Template, 2, 0, \"ng-template\", null, 7, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵtemplate(8, VisualizarSerieComponent_ng_template_15_tr_2_ng_template_8_Template, 2, 0, \"ng-template\", null, 8, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const capitulo_r10 = ctx.$implicit;\n\n    const _r12 = i0.ɵɵreference(7);\n\n    const _r14 = i0.ɵɵreference(9);\n\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(capitulo_r10.titulo);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.serie.ultimaTemporadaVista > ctx_r9.serie.serie.temporadas[ctx_r9.temporada].numTemporada || ctx_r9.serie.ultimaTemporadaVista == ctx_r9.serie.serie.temporadas[ctx_r9.temporada].numTemporada && ctx_r9.serie.ultimoCapituloVisto >= capitulo_r10.numero)(\"ngIfThen\", _r12)(\"ngIfElse\", _r14);\n  }\n}\n\nfunction VisualizarSerieComponent_ng_template_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\");\n    i0.ɵɵelementStart(1, \"tbody\");\n    i0.ɵɵtemplate(2, VisualizarSerieComponent_ng_template_15_tr_2_Template, 10, 4, \"tr\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.serie.serie.temporadas[ctx_r4.temporada].capitulos);\n  }\n}\n\nexport class VisualizarSerieComponent {\n  constructor(usuarioService) {\n    this.usuarioService = usuarioService;\n    this.usuarioUrl = '';\n    this.pendiente = false;\n    this.idSerie = window.location.href.split(\"/\")[4];\n    this.usuario = {};\n  }\n\n  ngOnInit() {\n    this.usuario = this.usuarioService.usuario;\n    var self = this;\n    this.usuario.repertorioUsuario.seriesPendientes.forEach(function (valor, indice, array) {\n      if (valor.idSerie == self.idSerie) {\n        self.pendiente = true;\n        self.serie = valor;\n        self.temporada = 0;\n      }\n    });\n    this.buscarSerie(self);\n  }\n\n  buscarSerie(self) {\n    this.usuario.repertorioUsuario.seriesEmpezadas.forEach(function (valor, indice, array) {\n      if (valor.serie.idSerie == self.idSerie) {\n        self.serie = valor;\n        self.pendiente = false;\n        self.temporada = valor.ultimaTemporadaVista - 1;\n      }\n    });\n    this.usuario.repertorioUsuario.seriesFinalizadas.forEach(function (valor, indice, array) {\n      if (valor.serie.idSerie == self.idSerie) {\n        self.serie = valor;\n        self.pendiente = false;\n        self.temporada = valor.ultimaTemporadaVista - 1;\n      }\n    });\n  }\n\n  verCapitulo(numCapitulo) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var self = _this;\n\n      if (_this.pendiente == true) {\n        self.usuario = yield _this.usuarioService.verCapitulo(_this.usuario.nombre, _this.serie.idSerie, _this.serie.temporadas[_this.temporada].numTemporada, numCapitulo).toPromise();\n      } else {\n        self.usuario = yield _this.usuarioService.verCapitulo(_this.usuario.nombre, _this.serie.serie.idSerie, _this.serie.serie.temporadas[_this.temporada].numTemporada, numCapitulo).toPromise();\n      }\n\n      _this.buscarSerie(_this);\n    })();\n  }\n\n  ngOnDestroy() {\n    this.usuarioService.usuario = this.usuario;\n  }\n\n  restaTemporada() {\n    if (this.temporada > 0) {\n      this.temporada -= 1;\n    }\n  }\n\n  sumaTemporada() {\n    if (this.pendiente) {\n      if (this.serie.temporadas.length - 1 > this.temporada) {\n        this.temporada += 1;\n      }\n    } else {\n      if (this.serie.serie.temporadas.length - 1 > this.temporada) {\n        this.temporada += 1;\n      }\n    }\n  }\n\n}\n\nVisualizarSerieComponent.ɵfac = function VisualizarSerieComponent_Factory(t) {\n  return new (t || VisualizarSerieComponent)(i0.ɵɵdirectiveInject(i1.UsuarioService));\n};\n\nVisualizarSerieComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: VisualizarSerieComponent,\n  selectors: [[\"app-visualizar-serie\"]],\n  decls: 17,\n  vars: 5,\n  consts: [[1, \"month\"], [1, \"prev\"], [\"type\", \"submit\", \"value\", \"<<\", 1, \"button\", 3, \"click\"], [1, \"next\"], [\"type\", \"submit\", \"value\", \">>\", 1, \"button\", 3, \"click\"], [1, \"estandar\"], [4, \"ngIf\", \"ngIfThen\", \"ngIfElse\"], [\"thenBlock\", \"\"], [\"elseBlock\", \"\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"submit\", \"value\", \"Ver Capitulo\", 1, \"button\", 3, \"click\"]],\n  template: function VisualizarSerieComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"ul\");\n      i0.ɵɵelementStart(2, \"li\", 1);\n      i0.ɵɵelementStart(3, \"input\", 2);\n      i0.ɵɵlistener(\"click\", function VisualizarSerieComponent_Template_input_click_3_listener() {\n        return ctx.restaTemporada();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"li\", 3);\n      i0.ɵɵelementStart(5, \"input\", 4);\n      i0.ɵɵlistener(\"click\", function VisualizarSerieComponent_Template_input_click_5_listener() {\n        return ctx.sumaTemporada();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"li\");\n      i0.ɵɵtext(7);\n      i0.ɵɵelement(8, \"br\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\");\n      i0.ɵɵelementStart(10, \"label\", 5);\n      i0.ɵɵtext(11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(12, VisualizarSerieComponent_div_12_Template, 1, 0, \"div\", 6);\n      i0.ɵɵtemplate(13, VisualizarSerieComponent_ng_template_13_Template, 4, 1, \"ng-template\", null, 7, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(15, VisualizarSerieComponent_ng_template_15_Template, 3, 1, \"ng-template\", null, 8, i0.ɵɵtemplateRefExtractor);\n    }\n\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(14);\n\n      const _r3 = i0.ɵɵreference(16);\n\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate1(\" \", ctx.pendiente ? ctx.serie.nombreSerie + \" - Temporada \" + ctx.serie.temporadas[ctx.temporada].numTemporada : ctx.serie.serie.nombreSerie + \" - Temporada \" + ctx.serie.serie.temporadas[ctx.temporada].numTemporada, \"\");\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(ctx.serie.categoria);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.pendiente == true)(\"ngIfThen\", _r1)(\"ngIfElse\", _r3);\n    }\n  },\n  directives: [i2.NgIf, i2.NgForOf],\n  styles: [\"ul[_ngcontent-%COMP%] {list-style-type: none;}\\n\\n.button[_ngcontent-%COMP%] {\\n  display: inline-block;\\n  padding: 15px 25px;\\n  font-size: 18px;\\n  cursor: pointer;\\n  text-align: center;\\n  text-decoration: none;\\n  outline: none;\\n  color: #fff;\\n  background-color: #F2BF91;\\n  border: none;\\n  border-radius: 15px;\\n  box-shadow: 0 9px #999;\\n  margin-top: -40px;\\n}\\n\\n.button[_ngcontent-%COMP%]:active {\\n  background-color: #3e8e41;\\n  box-shadow: 0 5px #666;\\n  transform: translateY(4px);\\n}\\n\\n.month[_ngcontent-%COMP%] {\\n  margin-top: 30px;\\n  margin-left: 22%;\\n  padding: 20px;\\n  width: 50%;\\n  background-color: #F2BF91;\\n  text-align: center;\\n\\n}\\n\\n.month[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\\n  margin: 0;\\n  padding: 0;\\n}\\n\\n.month[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\n  color: white;\\n  font-size: 20px;\\n  text-transform: uppercase;\\n  letter-spacing: 3px;\\n}\\n\\n.month[_ngcontent-%COMP%]   .prev[_ngcontent-%COMP%] {\\n  float: left;\\n  padding-top: 10px;\\n}\\n\\n.month[_ngcontent-%COMP%]   .next[_ngcontent-%COMP%] {\\n  float: right;\\n  padding-top: 10px;\\n}\\n\\n.estandar[_ngcontent-%COMP%]{\\n  margin-top: 50px;\\n  display: inline-block;\\n  margin-left: 19%;\\n  font-size: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpc3VhbGl6YXItc2VyaWUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFJLHFCQUFxQixDQUFDOztBQUUxQjtFQUNFLHFCQUFxQjtFQUNyQixrQkFBa0I7RUFDbEIsZUFBZTtFQUNmLGVBQWU7RUFDZixrQkFBa0I7RUFDbEIscUJBQXFCO0VBQ3JCLGFBQWE7RUFDYixXQUFXO0VBQ1gseUJBQXlCO0VBQ3pCLFlBQVk7RUFDWixtQkFBbUI7RUFDbkIsc0JBQXNCO0VBQ3RCLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixzQkFBc0I7RUFDdEIsMEJBQTBCO0FBQzVCOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGdCQUFnQjtFQUNoQixhQUFhO0VBQ2IsVUFBVTtFQUNWLHlCQUF5QjtFQUN6QixrQkFBa0I7O0FBRXBCOztBQUVBO0VBQ0UsU0FBUztFQUNULFVBQVU7QUFDWjs7QUFFQTtFQUNFLFlBQVk7RUFDWixlQUFlO0VBQ2YseUJBQXlCO0VBQ3pCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osaUJBQWlCO0FBQ25COztBQUNBO0VBQ0UsZ0JBQWdCO0VBQ2hCLHFCQUFxQjtFQUNyQixnQkFBZ0I7RUFDaEIsZUFBZTtBQUNqQiIsImZpbGUiOiJ2aXN1YWxpemFyLXNlcmllLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJ1bCB7bGlzdC1zdHlsZS10eXBlOiBub25lO31cblxuLmJ1dHRvbiB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgcGFkZGluZzogMTVweCAyNXB4O1xuICBmb250LXNpemU6IDE4cHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gIG91dGxpbmU6IG5vbmU7XG4gIGNvbG9yOiAjZmZmO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjJCRjkxO1xuICBib3JkZXI6IG5vbmU7XG4gIGJvcmRlci1yYWRpdXM6IDE1cHg7XG4gIGJveC1zaGFkb3c6IDAgOXB4ICM5OTk7XG4gIG1hcmdpbi10b3A6IC00MHB4O1xufVxuXG4uYnV0dG9uOmFjdGl2ZSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICMzZThlNDE7XG4gIGJveC1zaGFkb3c6IDAgNXB4ICM2NjY7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSg0cHgpO1xufVxuXG4ubW9udGgge1xuICBtYXJnaW4tdG9wOiAzMHB4O1xuICBtYXJnaW4tbGVmdDogMjIlO1xuICBwYWRkaW5nOiAyMHB4O1xuICB3aWR0aDogNTAlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjJCRjkxO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG5cbn1cblxuLm1vbnRoIHVsIHtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xufVxuXG4ubW9udGggdWwgbGkge1xuICBjb2xvcjogd2hpdGU7XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgbGV0dGVyLXNwYWNpbmc6IDNweDtcbn1cblxuLm1vbnRoIC5wcmV2IHtcbiAgZmxvYXQ6IGxlZnQ7XG4gIHBhZGRpbmctdG9wOiAxMHB4O1xufVxuXG4ubW9udGggLm5leHQge1xuICBmbG9hdDogcmlnaHQ7XG4gIHBhZGRpbmctdG9wOiAxMHB4O1xufVxuLmVzdGFuZGFye1xuICBtYXJnaW4tdG9wOiA1MHB4O1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIG1hcmdpbi1sZWZ0OiAxOSU7XG4gIGZvbnQtc2l6ZTogMjBweDtcbn1cbiJdfQ== */\"]\n});","map":{"version":3,"sources":["D:\\clase\\Master\\Internet\\angular\\polaflix-mario\\src\\app\\visualizar-serie\\visualizar-serie.component.ts","D:\\clase\\Master\\Internet\\angular\\polaflix-mario\\src\\app\\visualizar-serie\\visualizar-serie.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { UsuarioService } from '../usuario-service.service';\nimport { Serie } from '../serie';\nimport { SerieEmpezada } from '../serieEmpezada';\nimport { Usuario } from '../usuario';\n\n@Component({\n  selector: 'app-visualizar-serie',\n  templateUrl: './visualizar-serie.component.html',\n  styleUrls: ['./visualizar-serie.component.css']\n})\nexport class VisualizarSerieComponent implements OnInit {\n\n  public usuario : any;\n  private usuarioUrl: string = '';\n  private idSerie: any;\n  public pendiente: boolean = false;\n  public serie: any;\n  public temporada : any;\n\n  constructor(public usuarioService: UsuarioService) {\n    this.idSerie = window.location.href.split(\"/\")[4];\n    this.usuario = {};\n  }\n\n  ngOnInit(): void {\n    this.usuario = this.usuarioService.usuario;\n    var self = this;\n    this.usuario.repertorioUsuario.seriesPendientes.forEach( function(valor:Serie, indice: number, array: Array<Serie>) {\n      if(valor.idSerie == self.idSerie){\n        self.pendiente = true;\n        self.serie = valor;\n        self.temporada = 0;\n      }\n    });\n\n    this.buscarSerie(self);\n\n  }\n\n  buscarSerie(self: any){\n    this.usuario.repertorioUsuario.seriesEmpezadas.forEach( function(valor:SerieEmpezada, indice: number, array: Array<SerieEmpezada>) {\n      if(valor.serie.idSerie == self.idSerie){\n        self.serie = valor;\n        self.pendiente = false;\n        self.temporada = valor.ultimaTemporadaVista-1;\n      }\n    });\n\n    this.usuario.repertorioUsuario.seriesFinalizadas.forEach( function(valor:SerieEmpezada, indice: number, array: Array<SerieEmpezada>) {\n      if(valor.serie.idSerie == self.idSerie){\n        self.serie = valor;\n        self.pendiente = false;\n        self.temporada = valor.ultimaTemporadaVista-1;\n      }\n    });\n  }\n\n  async verCapitulo(numCapitulo:number){\n    var self = this;\n    if(this.pendiente == true){\n      self.usuario = await this.usuarioService.verCapitulo(this.usuario.nombre, this.serie.idSerie,\n        this.serie.temporadas[this.temporada].numTemporada, numCapitulo).toPromise();\n    }else{\n      self.usuario = await this.usuarioService.verCapitulo(this.usuario.nombre, this.serie.serie.idSerie,\n        this.serie.serie.temporadas[this.temporada].numTemporada, numCapitulo).toPromise();\n\n    }\n    this.buscarSerie(this);\n  }\n\n  ngOnDestroy() {\n    this.usuarioService.usuario = this.usuario;\n  }\n\n  restaTemporada(){\n    if(this.temporada>0){\n      this.temporada -= 1;\n    }\n  }\n\n  sumaTemporada(){\n    if(this.pendiente){\n      if(this.serie.temporadas.length - 1 > this.temporada){\n          this.temporada += 1;\n      }\n    }else{\n      if(this.serie.serie.temporadas.length -1 > this.temporada){\n          this.temporada += 1;\n      }\n    }\n  }\n\n}\n","<div class=\"month\">\n  <ul>\n    <li class=\"prev\"> <input class=\"button\" type=\"submit\" value=\"<<\" (click)=\"restaTemporada()\"> </li>\n    <li class=\"next\"> <input class=\"button\" type=\"submit\" value=\">>\" (click)=\"sumaTemporada()\"> </li>\n    <li>\n      {{ pendiente ? serie.nombreSerie + \" - Temporada \" + serie.temporadas[temporada].numTemporada : serie.serie.nombreSerie + \" - Temporada \" + serie.serie.temporadas[temporada].numTemporada }}<br>\n    </li>\n  </ul>\n</div>\n\n<div>\n  <label class=\"estandar\">{{serie.categoria}}</label>\n</div>\n<div *ngIf=\"pendiente == true; then thenBlock else elseBlock\"></div>\n<ng-template #thenBlock>\n<div>\n  <table>\n  <tbody>\n          <tr *ngFor=\"let capitulo of serie.temporadas[temporada].capitulos\">\n            <td>{{ capitulo.titulo }}</td>\n            <td><input class=\"button\" type=\"submit\" value=\"Ver Capitulo\" (click)=\"verCapitulo(capitulo.numero)\"></td>\n            <td> Pendiente </td>\n          </tr>\n  </tbody>\n\n  </table>\n</div>\n</ng-template>\n\n<ng-template #elseBlock>\n\n  <table>\n  <tbody>\n          <tr *ngFor=\"let capitulo of serie.serie.temporadas[temporada].capitulos\">\n            <td>{{ capitulo.titulo }}</td>\n            <td><input class=\"button\" type=\"submit\" value=\"Ver Capitulo\" (click)=\"verCapitulo(capitulo.numero)\"></td>\n            <div *ngIf=\"serie.ultimaTemporadaVista > serie.serie.temporadas[temporada].numTemporada ||\n\t\t\t\t(serie.ultimaTemporadaVista == serie.serie.temporadas[temporada].numTemporada &&\n\t\t\t\tserie.ultimoCapituloVisto >= capitulo.numero); then thenBlock else elseBlock\"></div>\n          <ng-template #thenBlock>\n            <td> Visto </td>\n          </ng-template>\n          <ng-template #elseBlock>\n            <td> Pendiente </td>\n          </ng-template>\n          </tr>\n  </tbody>\n\n  </table>\n\n</ng-template>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}